@namespace DRApplication.Client.Controls
@inject NavigationManager NavigationManager
@inject HardwareSystemManager manager
@inject AppState AppState

<NewButton Url="/hardwaresystem/create" />

<MudTable Items="@AppState.HardwareSystemVms" Hover="true" Striped="true" Dense="true" Class="my-4">
    <HeaderContent>
        <MudTh>ID</MudTh>
        <MudTh>Name</MudTh>
        <MudTh>Edit</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Id">@context.Id</MudTd>
        <MudTd DataLabel="Name">@context.Name</MudTd>
        <MudTd DataLabel="Edit">
            <a href="/hardwaresystem/edit/@context.Id" role="button">
                <MudIcon Icon="@Icons.Material.Filled.Edit" Color="Color.Warning"></MudIcon>
            </a>
        </MudTd>
    </RowTemplate>
</MudTable>

@code {

    bool _isBusy;

    async Task SetHardwareSystems()
    {
        var items = await manager.GetAllAsync();
        var vms = Mapping.Mapper.Map<List<HardwareSystemVm>>(items);
        AppState.UpdateHardwareSystemVms(this, vms);
    }
    async Task SetHardwareSystemAndNavigate()
    {

    }
    protected override async Task OnInitializedAsync()
    {
        _isBusy = true;
        await SetHardwareSystems();
        _isBusy = false;
    }

}