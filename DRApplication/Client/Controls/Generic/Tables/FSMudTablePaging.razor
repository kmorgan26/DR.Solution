@typeparam TItem
@inherits MudTable<TItem>
@namespace DRApplication.Client.Controls
@using DRApplication.Shared.Responses

<MudTable @ref="@_table" Items="TableItems"
          CurrentPage="@_pagedResponse.PageNumber"
          RowsPerPage="@_pagedResponse.PageSize"
          Hover="true"
          Breakpoint="Breakpoint.Sm"
          Striped="true"
          Dense="true"
          Elevation="3"
          TotalItems="@_pagedResponse.TotalRecords"
          @bind-SelectedItem="_selectedItem"
          RowEditCommit="RowCommited"
          IsEditRowSwitchingBlocked="true">

    <HeaderContent>
        @FSHeaderContent
    </HeaderContent>

    <RowTemplate>
        @FSRowTemplate(@context)
    </RowTemplate>
    <RowEditingTemplate>
        @FSRowEditingTemplate(@context)
    </RowEditingTemplate>

    @*<PagerContent>
        <MudPagination Rectangular="true" SelectedChanged="PageChanged" Color="Color.Primary" Count="_pagedResponse.TotalPages" />
        Showing Page @_pagedResponse.PageNumber of @_pagedResponse.TotalPages
        Total Records: @_pagedResponse.TotalRecords
    </PagerContent>*@

</MudTable>

@code {

    private MudTable<TItem>? _table;

    private TItem _selectedItem;

    private PagedResponse<Device> _pagedResponse = new();

    private PaginationFilter _paginationFilter = new();

    private void RowCommited(object e) => OnRowCommited.InvokeAsync((TItem)e);

    [Parameter]
    public EventCallback<TItem> OnRowCommited { get; set; }

    [Parameter]
    public IEnumerable<TItem>? TableItems { get; set; }

    [Parameter]
    public RenderFragment? FSHeaderContent { get; set; }

    [Parameter]
    public RenderFragment<TItem>? FSRowTemplate { get; set; }

    [Parameter]
    public RenderFragment<TItem>? FSRowEditingTemplate { get; set; }

}

