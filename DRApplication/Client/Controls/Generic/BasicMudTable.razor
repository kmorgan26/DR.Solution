@typeparam TItem
@inherits MudTable<TItem>

<MudTable Items="@Items" 
    @bind-SelectedItem="_selectedItem"
    Hover="true" 
    Breakpoint="Breakpoint.Sm" 
    Loading="@Loading" 
    CommitEditTooltip="Save Changes"
    IsEditRowSwitchingBlocked="true"
    OnRowClick="OnRowClicked"
    RowEditCommit="RowEditCommited"

    OnCommitEditClick="OnCommitEditClick"
    LoadingProgressColor="Color.Info" >

    <HeaderContent>
        @HeaderContent
    </HeaderContent>

    <RowTemplate>
        @RowTemplate?(@context)
    </RowTemplate>

    <RowEditingTemplate>
        @RowEditTemplate?(@context)
    </RowEditingTemplate>

</MudTable>

@code{

    [Parameter]
    public IEnumerable<TItem>? Items { get; set; }

    [Parameter]
    public bool Loading { get; set; }

    [Parameter]
    public RenderFragment? HeaderContent { get; set; }

    [Parameter]
    public RenderFragment<TItem>? RowTemplate { get; set; }

    [Parameter]
    public RenderFragment<TItem>? RowEditTemplate { get; set; }

    [Parameter]
    public EventCallback<TItem> OnRowCommited { get; set; }

    [Parameter]
    public EventCallback<TableRowClickEventArgs<TItem>> OnRowClicked { get; set; }

    private TItem _selectedItem;

    private async Task RowClicked(TableRowClickEventArgs<TItem> args)
    {
        await OnRowClicked.InvokeAsync(args);
    }
    private async Task RowEditCommited(TItem item)
    {
        await OnRowCommited.InvokeAsync(item);
    }

    private List<string> editEvents = new();

}