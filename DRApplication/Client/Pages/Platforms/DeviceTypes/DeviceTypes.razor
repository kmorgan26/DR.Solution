@page "/deviceTypes"
@namespace DRApplication.Client.Pages.Platforms
@inject IPlatformService _platformService

<TitleHeader IconPath="@Icons.Material.Filled.LocalAirport" TitleText="Device Types" />

@if (!isBusy)
{
    <BasicTable Request="_tableRequest()" TItem="DeviceTypeVm"></BasicTable>
}

@code{
    bool isBusy;
    private IEnumerable<DeviceTypeVm>? _viewModels;

    private TableRequest<DeviceTypeVm> _tableRequest()
    {
        return new TableRequest<DeviceTypeVm>()
        { 
            Data = _viewModels, 
            UrlSegment = "devicetype/edit"
        };
    }

    protected override async Task OnInitializedAsync()
    {
        isBusy = true;
        _viewModels = await _platformService.GetDeviceTypeVmsAsync();
       isBusy = false;
    }
}